{"version":3,"sources":["components/personForm.js","components/persons.js","components/searchFilter.js","services/persons.js","components/notification.js","App.js","index.js"],"names":["PersonForm","newName","handleNameChange","newNumber","handleNumberChange","addPerson","onSubmit","value","onChange","type","Person","person","deletePerson","className","name","number","onClick","window","confirm","id","Persons","filteredPersons","map","p","key","SearchFilter","filteredValue","filteredValueChange","baseUrl","axios","get","then","response","data","newObject","post","catch","error","errorMessage","console","dir","put","delete","Notification","message","isError","replaceMessage","App","useState","persons","setPersons","setNewName","setNewNumber","setFilteredValue","setFilteredPersons","successMessage","setSuccessMessage","setErrorMessage","useEffect","peopleService","event","filterValue","target","toLowerCase","newFilteredPersons","filter","startsWith","preventDefault","existingPersons","length","existingPerson","updatedPerson","setTimeout","createdPerson","concat","toLocaleLowerCase","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.88d2637f.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst PersonForm = ({newName, handleNameChange, newNumber, handleNumberChange, addPerson }) => {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n                <div>\r\n                    name: <input value={newName} onChange={handleNameChange} />\r\n                </div>\r\n                <div>\r\n                    number: <input value={newNumber} onChange={handleNumberChange} /></div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n    );\r\n}\r\n\r\nexport default PersonForm","import React from 'react';\r\n\r\nimport '../index.css'\r\n\r\nconst Persons = ({ filteredPersons, deletePerson }) => {\r\n    return (\r\n        <>\r\n            {filteredPersons.map(p => <Person key={p.name} person={p} deletePerson={deletePerson} />)}\r\n        </>);\r\n}\r\n\r\nconst Person = ({ person, deletePerson }) => {\r\n    const confirmDeletion = () => {\r\n        if (window.confirm(`Delete ${person.name}?`)) { \r\n            deletePerson(person.id);\r\n          }\r\n    }\r\n    \r\n    return (\r\n        <>\r\n        <div className=\"row\">\r\n            <div>{person.name} {person.number} </div>\r\n            <button onClick={confirmDeletion}>delete</button>\r\n        </div>\r\n        </>);\r\n}\r\n\r\nexport default Persons;","import React from 'react';\r\n\r\nconst SearchFilter = ({filteredValue, filteredValueChange}) => {\r\n    return (\r\n      <div>\r\n        filter shown with: <input value={filteredValue} onChange={filteredValueChange} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  export default SearchFilter","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request\r\n        .then(response => response.data)\r\n        .catch(error => {\r\n            const errorMessage = error.response.data.error;\r\n            console.dir(error);\r\n            return errorMessage;\r\n        });\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    deletePerson: deletePerson\r\n}","import React from 'react'\r\n\r\nimport '../index.css'\r\n\r\nconst Notification = ({ message, isError }) => {\r\n    if (message === null) {\r\n      return null;\r\n    }\r\n\r\n    let className = isError ? \"error\" : \"success\";  \r\n    return (\r\n      <div className={className}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification;","import React, { useState, useEffect } from 'react'\r\n\r\nimport PersonForm from './components/personForm'\r\nimport Persons from './components/persons'\r\nimport SearchFilter from './components/searchFilter'\r\nimport peopleService from './services/persons'\r\nimport Notification from './components/notification'\r\nimport './index.css'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [filteredValue, setFilteredValue] = useState('');\r\n  const [filteredPersons, setFilteredPersons] = useState([...persons]);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const existingPersons = persons.filter(p => p.name === newName);\r\n    if(existingPersons.length>0){\r\n      const existingPerson = existingPersons[0];\r\n      if(window.confirm(replaceMessage(existingPerson.name))) {\r\n        const updatedPerson = {...existingPerson, number: newNumber};\r\n        peopleService.update(existingPerson.id, updatedPerson)\r\n          .then(updatedPerson => {\r\n            setPersons(persons.map(p => p.id !== existingPerson.id ? p : updatedPerson));\r\n            setFilteredPersons(filteredPersons.map(p => p.id !== existingPerson.id ? p : updatedPerson));\r\n          })\r\n          .catch(error => {\r\n            setErrorMessage(`Information of ${existingPerson.name} has already been removed from server.`);\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n          });\r\n      }\r\n      return;\r\n    }\r\n\r\n    setNewName('');\r\n    setNewNumber('');\r\n\r\n    peopleService.create({ name: newName, number: newNumber })\r\n      .then(createdPerson => {\r\n        setPersons(persons.concat(createdPerson));\r\n        if (createdPerson.name.toLocaleLowerCase().startsWith(filteredValue.toLocaleLowerCase())) {\r\n          setFilteredPersons(filteredPersons.concat(createdPerson))\r\n        }\r\n        setSuccessMessage(`Added ${newName}`);\r\n        setTimeout(() => {\r\n          setSuccessMessage(null)\r\n        }, 5000)\r\n      })\r\n        .catch(error => {\r\n            setErrorMessage(error.error);\r\n            console.log(error.error)\r\n            setTimeout(() => {\r\n                setErrorMessage(null)\r\n            }, 5000)\r\n        });\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  }\r\n\r\n  const filteredValueChange = (event) => {\r\n    const filterValue = event.target.value.toLowerCase();\r\n    const newFilteredPersons = persons.filter((p) => {\r\n      return p.name.toLowerCase().startsWith(filterValue);\r\n    });\r\n    setFilteredPersons(newFilteredPersons);\r\n    setFilteredValue(filterValue);\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    peopleService.deletePerson(id)\r\n      .then(response => {\r\n        setPersons(persons.filter(p => p.id !== id));\r\n        setFilteredPersons(filteredPersons.filter(p => p.id !== id));\r\n      }\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    peopleService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response);\r\n        setFilteredPersons(response);\r\n      })\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={successMessage} isError={false}/>\r\n      <Notification message={errorMessage} isError={true}/>\r\n      <SearchFilter filteredValue={filteredValue} filteredValueChange={filteredValueChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n        addPerson={addPerson} />\r\n      <h2>Numbers</h2>\r\n      <Persons filteredPersons={filteredPersons} deletePerson={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst replaceMessage = (name) => {\r\n  return `${name} is already added to phonebook, replace the old number with a new one?`;\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}